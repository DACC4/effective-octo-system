sequenceDiagram
    actor C as Client
    participant S as Server

    C->>S: Ask for folder metadata
    S-->>C: Send folder metadata

    C->>C: Decrypt folder metadata

    C->>S: Ask for file's metadata
    S-->>C: Send file's metadata

    C->>C: Decrypt file's metadata

    C->>S: Ask for Guest's public key
    S-->>C: Send Guest's public key

    C->>C: Encrypt file's key with Guest's public key

    C->>S: Send encrypted Guest's file key and file metadata

    S->>S: Add Guest to the list of users with access to the file